<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>upscaledb: upscaledb Environment Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">upscaledb
   &#160;<span id="projectnumber">2.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">upscaledb Environment Functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga298fa4ec1308a1b77962ed71bb14716a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga298fa4ec1308a1b77962ed71bb14716a">UPS_FLUSH_COMMITTED_TRANSACTIONS</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga298fa4ec1308a1b77962ed71bb14716a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f26bb19941bd0a0b08ed01ff4fd4390"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga5f26bb19941bd0a0b08ed01ff4fd4390">UPS_DONT_LOCK</a>&#160;&#160;&#160;0xf0000000</td></tr>
<tr class="separator:ga5f26bb19941bd0a0b08ed01ff4fd4390"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga30705470fbae862c47512a33564d72a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga30705470fbae862c47512a33564d72a8">ups_env_create</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> **env, const char *filename, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> mode, const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *param)</td></tr>
<tr class="separator:ga30705470fbae862c47512a33564d72a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f347d5c9b11301c45c3f27624b5f55a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga3f347d5c9b11301c45c3f27624b5f55a">ups_env_open</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> **env, const char *filename, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *param)</td></tr>
<tr class="separator:ga3f347d5c9b11301c45c3f27624b5f55a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga314c78f6e23b79f23ed7167dd9dc4b7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga314c78f6e23b79f23ed7167dd9dc4b7a">ups_env_get_parameters</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *param)</td></tr>
<tr class="separator:ga314c78f6e23b79f23ed7167dd9dc4b7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38fcbdfa52fe22afe2aa3b3cc7395ea5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga38fcbdfa52fe22afe2aa3b3cc7395ea5">ups_env_create_db</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="upscaledb_8h.html#a714e13216711b8969c2315563ed2ae78">ups_db_t</a> **db, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> name, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *params)</td></tr>
<tr class="separator:ga38fcbdfa52fe22afe2aa3b3cc7395ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2fc332c2e0b4feba84c2e9761c6443a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga2fc332c2e0b4feba84c2e9761c6443a5">ups_env_open_db</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="upscaledb_8h.html#a714e13216711b8969c2315563ed2ae78">ups_db_t</a> **db, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> name, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags, const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *params)</td></tr>
<tr class="separator:ga2fc332c2e0b4feba84c2e9761c6443a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeff4a7a4c1363bef3c7f0a178ad8fd5b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#gaeff4a7a4c1363bef3c7f0a178ad8fd5b">ups_env_rename_db</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> oldname, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> newname, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:gaeff4a7a4c1363bef3c7f0a178ad8fd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5ddd4e578a39dc1927d8a6465bcac2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#gae5ddd4e578a39dc1927d8a6465bcac2a">ups_env_erase_db</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> name, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:gae5ddd4e578a39dc1927d8a6465bcac2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga394c0b85da29e3eaca719b67504f755f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga394c0b85da29e3eaca719b67504f755f">ups_env_flush</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:ga394c0b85da29e3eaca719b67504f755f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70ee2ba96afc341acd72a3e7a11090ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#ga70ee2ba96afc341acd72a3e7a11090ab">ups_env_get_database_names</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *names, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *count)</td></tr>
<tr class="separator:ga70ee2ba96afc341acd72a3e7a11090ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae50d3ad9ebd3f098bdf755b300fa3496"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ups__env.html#gae50d3ad9ebd3f098bdf755b300fa3496">ups_env_close</a> (<a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *env, <a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flags)</td></tr>
<tr class="separator:gae50d3ad9ebd3f098bdf755b300fa3496"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga5f26bb19941bd0a0b08ed01ff4fd4390"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UPS_DONT_LOCK&#160;&#160;&#160;0xf0000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="upscaledb_8h_source.html#l01070">1070</a> of file <a class="el" href="upscaledb_8h_source.html">upscaledb.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga298fa4ec1308a1b77962ed71bb14716a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UPS_FLUSH_COMMITTED_TRANSACTIONS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="upscaledb_8h_source.html#l01049">1049</a> of file <a class="el" href="upscaledb_8h_source.html">upscaledb.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae50d3ad9ebd3f098bdf755b300fa3496"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Closes the Database Environment</p>
<p>This function closes the Database Environment. It also frees the memory resources allocated in the <em>env</em> handle, and tries to truncate the file (see below).</p>
<p>If the flag <a class="el" href="group__ups__database.html#ga9c7eadb6077237a0cb6d2f65396452e0">UPS_AUTO_CLEANUP</a> is specified, upscaledb automatically calls <a class="el" href="group__ups__database.html#ga411dcddac34ea2dc3770e9fcce93cec3">ups_db_close</a> with flag <a class="el" href="group__ups__database.html#ga9c7eadb6077237a0cb6d2f65396452e0">UPS_AUTO_CLEANUP</a> on all open Databases (which closes all open Databases and their Cursors). This invalidates the ups_db_t and ups_cursor_t handles!</p>
<p>If the flag is not specified, the application must close all Database handles with <a class="el" href="group__ups__database.html#ga411dcddac34ea2dc3770e9fcce93cec3">ups_db_close</a> to prevent memory leaks.</p>
<p>This function also aborts all Transactions which were not yet committed, and therefore renders all Transaction handles invalid. If the flag <a class="el" href="group__ups__database.html#ga5549e1317e26ad4da78096f67007f7ea">UPS_TXN_AUTO_COMMIT</a> is specified, all Transactions will be committed.</p>
<p>This function also tries to truncate the file and "cut off" unused space at the end of the file to reduce the file size. This feature is disabled on Win32 if memory mapped I/O is used (see <a class="el" href="group__ups__database.html#gad6c99635435450b43aa1010f70b2f44f">UPS_DISABLE_MMAP</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for closing the handle. Possible flags are: <ul>
<li>
<a class="el" href="group__ups__database.html#ga9c7eadb6077237a0cb6d2f65396452e0">UPS_AUTO_CLEANUP</a>. Calls <a class="el" href="group__ups__database.html#ga411dcddac34ea2dc3770e9fcce93cec3">ups_db_close</a> with the flag <a class="el" href="group__ups__database.html#ga9c7eadb6077237a0cb6d2f65396452e0">UPS_AUTO_CLEANUP</a> on every open Database </li>
<li>
<a class="el" href="group__ups__database.html#ga5549e1317e26ad4da78096f67007f7ea">UPS_TXN_AUTO_COMMIT</a>. Automatically commit all open Transactions </li>
<li>
<a class="el" href="group__ups__database.html#ga43a0c4be524539dd7719670c1b19f4ad">UPS_TXN_AUTO_ABORT</a>. Automatically abort all open Transactions; this is the default behaviour </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if <em>env</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00698">upscaledb::env::close()</a>, and <a class="el" href="client1_8c_source.html#l00037">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga30705470fbae862c47512a33564d72a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> **&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a Database Environment</p>
<p>A Database Environment is a collection of Databases, which are all stored in one physical file (or in-memory). The maximum number of Databases depends on the page size; the default is above 600.</p>
<p>Each Database in an Environment is identified by a positive 16bit value (except 0 and values at or above 0xf000). Databases in an Environment can be created with <a class="el" href="group__ups__env.html#ga38fcbdfa52fe22afe2aa3b3cc7395ea5">ups_env_create_db</a> or opened with <a class="el" href="group__ups__env.html#ga2fc332c2e0b4feba84c2e9761c6443a5">ups_env_open_db</a>.</p>
<p>Specify a URL instead of a filename (i.e. "ups://localhost:8080/customers.db") to access a remote upscaledb Server.</p>
<p>To enable ACID Transactions, supply the flag <a class="el" href="group__ups__database.html#gab6ff32906c46051a58012f24d79a7c24">UPS_ENABLE_TRANSACTIONS</a>. By default, upscaledb will use a Journal for recovering the Environment and its data in case of a crash, and also to re-apply committed Transactions which were not yet flushed to disk. This Journalling can be disabled with the flag <a class="el" href="group__ups__database.html#ga801b9a235de797946fe46fcd6ec8a2f1">UPS_DISABLE_RECOVERY</a>. (It is disabled if the Environment is in-memory.)</p>
<p>For performance reasons the Journal does not use fsync(2) (or FlushFileBuffers on Win32) to flush modified buffers to disk. Use the flag <a class="el" href="group__ups__database.html#gae59ee70fdea8d8548d10c8c1caa3edb6">UPS_ENABLE_FSYNC</a> to force the use of fsync.</p>
<p>If Transactions are enabled, a journal file is written in order to provide recovery if the system crashes. These journal files can be compressed by supplying the parameter UPS_PARAM_ENABLE_JOURNAL_COMPRESSION. Values are one of <a class="el" href="group__ups__database.html#gaf972472b1d2ed3b624fdaef4214e5816">UPS_COMPRESSOR_ZLIB</a>, <a class="el" href="group__ups__database.html#ga4a7a3708ebd835c4b6fa80687f75f874">UPS_COMPRESSOR_SNAPPY</a> etc. See the upscaledb documentation for more details. This parameter is not persisted.</p>
<p>Upscaledb can transparently encrypt the generated file using 128bit AES in CBC mode. The transactional journal is not encrypted. Encryption can be enabled by specifying <a class="el" href="group__ups__database.html#ga3c29e7f5342bac39bbceedb43aa5f742">UPS_PARAM_ENCRYPTION_KEY</a> (see below). The identical key has to be provided in <a class="el" href="group__ups__env.html#ga3f347d5c9b11301c45c3f27624b5f55a">ups_env_open</a> as well. Ignored for remote Environments.</p>
<p>CRC32 checksums are stored when a page is flushed, and verified when it is fetched from disk if the flag <a class="el" href="group__ups__database.html#ga80fa8f7d0c0d67a21d7e19d13f438557">UPS_ENABLE_CRC32</a> is set. API functions will return <a class="el" href="group__ups__status__codes.html#ga73b2b6b1fc45e5c5326a616c0eb79011">UPS_INTEGRITY_VIOLATED</a> in case of failed verifications. Not allowed in In-Memory Environments. This flag is not persisted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A pointer to an Environment handle </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the Environment file. If the file already exists, it is overwritten. Can be NULL for an In-Memory Environment. Can be a URL ("ups://&lt;hostname&gt;:&lt;port&gt;/&lt;environment&gt;") for remote access. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for opening the Environment, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ups__database.html#gae59ee70fdea8d8548d10c8c1caa3edb6">UPS_ENABLE_FSYNC</a> Flushes all file handles after committing or aborting a Transaction using fsync(), fdatasync() or FlushFileBuffers(). This file has no effect if Transactions are disabled. Slows down performance but makes sure that all file handles and operating system caches are transferred to disk, thus providing a stronger durability. </li>
<li>
<a class="el" href="group__ups__database.html#ga45c75aa2047f74211a672dde966fa1b0">UPS_IN_MEMORY</a> Creates an In-Memory Environment. No file will be created, and the Database contents are lost after the Environment is closed. The <em>filename</em> parameter can be NULL. Do <b>NOT</b> specify <em>cache_size</em> other than 0. </li>
<li>
<a class="el" href="group__ups__database.html#gad6c99635435450b43aa1010f70b2f44f">UPS_DISABLE_MMAP</a> Do not use memory mapped files for I/O. By default, upscaledb checks if it can use mmap, since mmap is faster than read/write. For performance reasons, this flag should not be used. </li>
<li>
<a class="el" href="group__ups__database.html#ga298e4f933ee638f7212c51aa170808bc">UPS_CACHE_UNLIMITED</a> Do not limit the cache. Nearly as fast as an In-Memory Database. Not allowed in combination with a limited cache size. </li>
<li>
<a class="el" href="group__ups__database.html#gab6ff32906c46051a58012f24d79a7c24">UPS_ENABLE_TRANSACTIONS</a> Enables Transactions for this Environment. </li>
<li>
<a class="el" href="group__ups__database.html#ga801b9a235de797946fe46fcd6ec8a2f1">UPS_DISABLE_RECOVERY</a> Disables logging/recovery for this Environment. </li>
<li>
<a class="el" href="group__ups__database.html#ga80fa8f7d0c0d67a21d7e19d13f438557">UPS_ENABLE_CRC32</a> Stores (and verifies) CRC32 checksums. Not allowed in combination with <a class="el" href="group__ups__database.html#ga45c75aa2047f74211a672dde966fa1b0">UPS_IN_MEMORY</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramname">mode</td><td>File access rights for the new file. This is the <em>mode</em> parameter for creat(2). Ignored on Microsoft Windows. Default is 0644. </td></tr>
    <tr><td class="paramname">param</td><td>An array of <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> structures. The following parameters are available: <ul>
<li>
<a class="el" href="group__ups__database.html#ga693990741aa7890778b976dcf886405d">UPS_PARAM_CACHE_SIZE</a> The size of the Database cache, in bytes. The default size is defined in src/config.h as <em>UPS_DEFAULT_CACHE_SIZE</em> - usually 2MB </li>
<li>
<a class="el" href="group__ups__database.html#ga496a10dda6ca80fe7172a0194eb325c1">UPS_PARAM_POSIX_FADVISE</a> Sets the "advice" for posix_fadvise(). Only on supported platforms. Allowed values are <a class="el" href="group__ups__database.html#ga5512f2066c4698f852a045c2d1656578">UPS_POSIX_FADVICE_NORMAL</a> (which is the default) or <a class="el" href="group__ups__database.html#gaff6340291eebb414abde724aedd8587e">UPS_POSIX_FADVICE_RANDOM</a>. </li>
<li>
<a class="el" href="group__ups__database.html#ga8ababf65e20add11414ea71d301af6b6">UPS_PARAM_PAGE_SIZE</a> The size of a file page, in bytes. It is recommended not to change the default size. The default size depends on hardware and operating system. Page sizes must be 1024 or a multiple of 2048. </li>
<li>
<a class="el" href="group__ups__database.html#gac3b74e1628fac580709377b918cd3a85">UPS_PARAM_FILE_SIZE_LIMIT</a> Sets a file size limit (in bytes). Disabled by default. Not allowed in combination with <a class="el" href="group__ups__database.html#ga45c75aa2047f74211a672dde966fa1b0">UPS_IN_MEMORY</a>. If the limit is exceeded, API functions return <a class="el" href="group__ups__status__codes.html#ga7cb64a8b37c601c15fefa243063d39d1">UPS_LIMITS_REACHED</a>. </li>
<li>
<a class="el" href="group__ups__database.html#gacd60cf3d471666d07f709a20998ae2b7">UPS_PARAM_LOG_DIRECTORY</a> The path of the log file and the journal files; default is the same path as the database file. Ignored for remote Environments. </li>
<li>
<a class="el" href="group__ups__database.html#ga59b311a7be6aaa4cc9614b6bed8d29bf">UPS_PARAM_NETWORK_TIMEOUT_SEC</a> Timeout (in seconds) when waiting for data from a remote server. By default, no timeout is set. </li>
<li>
UPS_PARAM_ENABLE_JOURNAL_COMPRESSION Compresses the journal files to reduce I/O. See notes above. </li>
<li>
<a class="el" href="group__ups__database.html#ga3c29e7f5342bac39bbceedb43aa5f742">UPS_PARAM_ENCRYPTION_KEY</a> The 16 byte long AES encryption key; enables AES encryption for the Environment file. Not allowed for In-Memory Environments. Ignored for remote Environments. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags or parameters was specified </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga3c6a08be0a0403a8e20f359e4c58842c">UPS_IO_ERROR</a> if the file could not be opened or reading/writing failed </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#gabe38ecb2c72a8c8c93cfa8f1dfb360fe">UPS_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga71bfed5b8a4e2cb148eb3ab5707e55af">UPS_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga16140f9d76ef8726a3ac56b79778c4a6">UPS_INV_PAGE_SIZE</a> if <em>page_size</em> is not 1024 or a multiple of 2048 </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga1459b7bcd829d19aec3a6be34bb8f87b">UPS_INV_KEY_SIZE</a> if <em>key_size</em> is too large (at least 4 keys must fit in a page) </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga8c5c49f50b2e503602f4fc36b16cb35c">UPS_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#gaf03b330db379f1c8f6a6fae72e981a38">UPS_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ups__env.html#ga30705470fbae862c47512a33564d72a8">ups_env_create</a> </dd>
<dd>
<a class="el" href="group__ups__env.html#gae50d3ad9ebd3f098bdf755b300fa3496">ups_env_close</a> </dd>
<dd>
<a class="el" href="group__ups__env.html#ga3f347d5c9b11301c45c3f27624b5f55a">ups_env_open</a> </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00627">upscaledb::env::create()</a>, and <a class="el" href="client1_8c_source.html#l00037">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga38fcbdfa52fe22afe2aa3b3cc7395ea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_create_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a714e13216711b8969c2315563ed2ae78">ups_db_t</a> **&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new Database in a Database Environment</p>
<p>An Environment can contain a (limited) amount of Databases; the exact limit depends on the page size and is above 600.</p>
<p>Each Database in an Environment is identified by a positive 16bit value. 0 and values at or above 0xf000 are reserved.</p>
<p>This function initializes the ups_db_t handle (the second parameter). When the handle is no longer in use, it should be closed with <a class="el" href="group__ups__database.html#ga411dcddac34ea2dc3770e9fcce93cec3">ups_db_close</a>. Alternatively, the Database handle is closed automatically if <a class="el" href="group__ups__env.html#gae50d3ad9ebd3f098bdf755b300fa3496">ups_env_close</a> is called with the flag <a class="el" href="group__ups__database.html#ga9c7eadb6077237a0cb6d2f65396452e0">UPS_AUTO_CLEANUP</a>.</p>
<p>A Database can (and should) be configured and optimized for the data that is inserted. The data is described through flags and parameters. upscaledb differentiates between several data characteristics, and offers predefined "types" to describe the keys. In general, the default key type (<a class="el" href="group__ups__key__types.html#gad2247fb01fd7d74c9f8dcd9bb05116f6">UPS_TYPE_BINARY</a>) is slower than the other types, and fixed-length binary keys (<a class="el" href="group__ups__key__types.html#gad2247fb01fd7d74c9f8dcd9bb05116f6">UPS_TYPE_BINARY</a> in combination with <a class="el" href="group__ups__database.html#ga79e595da449b6a9a866c0c3e6e13eea0">UPS_PARAM_KEY_SIZE</a>) is faster than variable-length binary keys. It is therefore recommended to always set the key size and record size, although it is not required.</p>
<p>Internally, upscaledb uses two different layouts ("default" and "pax)
depending on the settings specified by the user. The "default" layout is enabled for variable-length keys or if duplicate keys are enabled. For fixed-length keys (without duplicates) the "pax" layout is chosen. The "pax" layout is more compact and usually faster.</p>
<p>A word of warning regarding the use of fixed length binary keys (<a class="el" href="group__ups__key__types.html#ga40ade69e5a66cb886cee049263639828">UPS_TYPE_CUSTOM</a> or <a class="el" href="group__ups__key__types.html#gad2247fb01fd7d74c9f8dcd9bb05116f6">UPS_TYPE_BINARY</a> in combination with <a class="el" href="group__ups__database.html#ga79e595da449b6a9a866c0c3e6e13eea0">UPS_PARAM_KEY_SIZE</a>): if your key size is too large, only few keys will fit in a Btree node. The Btree fanout will be very high, which will decrease performance. In such cases it might be better to NOT specify the key size; then upscaledb will store keys as blobs if they are too large.</p>
<p>See the Wiki documentation for <a href="https://github.com/cruppstahl/upscaledb/wiki/Evaluating-and-Benchmarking">Evaluating and Benchmarking</a> on how to test different configurations and optimize for performance.</p>
<p>The key type is set with <a class="el" href="group__ups__database.html#gacbb38eebd646f1e0a9b7ce1eb87429ac">UPS_PARAM_KEY_TYPE</a> and the record type is set with <a class="el" href="group__ups__database.html#gae95b1720e2379f6114a64fcb8d75cfc1">UPS_PARAM_RECORD_TYPE</a>. The types can have one of the following values:</p>
<ul>
<li>
UPS_TYPE_BINARY This is the default typef or keys and records: a binary blob with fixed or variable length. Internally, upscaledb uses memcmp(3) for the sort order of binary keys. Key size depends on <a class="el" href="group__ups__database.html#ga79e595da449b6a9a866c0c3e6e13eea0">UPS_PARAM_KEY_SIZE</a> and is unlimited (<a class="el" href="group__ups__database.html#ga06133a942ad3bd6defb7e866b6d336ea">UPS_KEY_SIZE_UNLIMITED</a>) by default. Record size depends on <a class="el" href="group__ups__database.html#ga921820cdf223a09ae69b6105ed7a32e9">UPS_PARAM_RECORD_SIZE</a> and is unlimited (<a class="el" href="group__ups__database.html#ga33d1f5b3962be88a5273ec46d4ab9709">UPS_RECORD_SIZE_UNLIMITED</a>) by default. </li>
<li>
UPS_TYPE_CUSTOM Only for keys: similar to <a class="el" href="group__ups__key__types.html#gad2247fb01fd7d74c9f8dcd9bb05116f6">UPS_TYPE_BINARY</a>, but uses a callback function for the sort order. This function is set with the parameter <a class="el" href="group__ups__database.html#ga1d3dff1669fd7a8209ec15d159d10550">UPS_PARAM_CUSTOM_COMPARE_NAME</a>. </li>
<li>
UPS_TYPE_UINT8 Key is a 8bit (1 byte) unsigned integer </li>
<li>
UPS_TYPE_UINT16 Key is a 16bit (2 byte) unsigned integer </li>
<li>
UPS_TYPE_UINT32 Key is a 32bit (4 byte) unsigned integer </li>
<li>
UPS_TYPE_UINT64 Key is a 64bit (8 byte) unsigned integer </li>
<li>
UPS_TYPE_REAL32 Key is a 32bit (4 byte) float </li>
<li>
UPS_TYPE_REAL64 Key is a 64bit (8 byte) double </li>
</ul>
<p>If the type is ommitted then <a class="el" href="group__ups__key__types.html#gad2247fb01fd7d74c9f8dcd9bb05116f6">UPS_TYPE_BINARY</a> is the default.</p>
<p>If binary/custom keys are so big that they cannot be stored in the Btree, then the full key will be stored in an overflow area, which has performance implications when accessing such keys.</p>
<p>In addition to the flags above, you can specify <em>UPS_ENABLE_DUPLICATE_KEYS</em> to insert duplicate keys, i.e. to model 1:n or n:m relationships.</p>
<p>If the size of the records is always constant, then <a class="el" href="group__ups__database.html#ga921820cdf223a09ae69b6105ed7a32e9">UPS_PARAM_RECORD_SIZE</a> should be used to specify this size. This allows upscaledb to optimize the record storage, and small records will automatically be stored in the Btree's leaf nodes instead of a separately allocated blob, allowing faster access. Setting a record size to 0 is valid and suited for boolean values ("key exists" vs "key doesn't exist"). The default record size is <a class="el" href="group__ups__database.html#ga33d1f5b3962be88a5273ec46d4ab9709">UPS_RECORD_SIZE_UNLIMITED</a>.</p>
<p>Records can be compressed transparently in order to reduce I/O and disk space. Compression is enabled with <a class="el" href="group__ups__database.html#ga7a424cde2efbbc3094f085805bb86e1a">UPS_PARAM_RECORD_COMPRESSION</a>. Values are one of <a class="el" href="group__ups__database.html#gaf972472b1d2ed3b624fdaef4214e5816">UPS_COMPRESSOR_ZLIB</a>, <a class="el" href="group__ups__database.html#ga4a7a3708ebd835c4b6fa80687f75f874">UPS_COMPRESSOR_SNAPPY</a> etc. See the upscaledb documentation for more details.</p>
<p>Keys can also be compressed by setting the parameter <a class="el" href="group__ups__database.html#gac80f4bb36d42c6262f2233168d785b65">UPS_PARAM_KEY_COMPRESSION</a>. See the upscaledb documentation for more details.</p>
<p>In addition, <em>experimental</em> integer compression algorithms are available for Databases created with the type <a class="el" href="group__ups__key__types.html#gac0cf07c12187947d95c7eae37535eb3c">UPS_TYPE_UINT32</a>. These algorithms (<a class="el" href="group__ups__database.html#ga46b5e6ed7e1f28de2e8806aac4c56f07">UPS_COMPRESSOR_UINT32_VARBYTE</a>, <a class="el" href="group__ups__database.html#gaaba1d8d79906566a7abf203b124cdc1f">UPS_COMPRESSOR_UINT32_SIMDCOMP</a>, <a class="el" href="group__ups__database.html#ga0d05905632852927b59f5472b04ed252">UPS_COMPRESSOR_UINT32_GROUPVARINT</a>, <a class="el" href="group__ups__database.html#gac83bb8e1f66d9725d2dd45fcbb9a3f98">UPS_COMPRESSOR_UINT32_STREAMVBYTE</a>, <a class="el" href="group__ups__database.html#gaf151f9d7138e8fe8b840dd4cab8ba107">UPS_COMPRESSOR_UINT32_FOR</a>, <a class="el" href="group__ups__database.html#gad19c392922aa1744a5af4b67a9d8b32d">UPS_COMPRESSOR_UINT32_MASKEDVBYTE</a> (requires AVX!)) are subject to change and might be removed in following versions. They only work with the default page size of 16kb.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle. </td></tr>
    <tr><td class="paramname">db</td><td>A valid Database handle, which will point to the created Database. To close the handle, use <a class="el" href="group__ups__database.html#ga411dcddac34ea2dc3770e9fcce93cec3">ups_db_close</a>. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the Database. If a Database with this name already exists, the function will fail with <a class="el" href="group__ups__status__codes.html#ga7d5ee8bb961c335c3e0f03964fe9fe22">UPS_DATABASE_ALREADY_EXISTS</a>. Database names from 0xf000 to 0xffff and 0 are reserved. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for creating the Database, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ups__database.html#ga13dc3fd47a24f7de3baf98c44c4897d7">UPS_ENABLE_DUPLICATE_KEYS</a>  Enable duplicate keys for this Database. By default, duplicate keys are disabled. </li>
<li>
<a class="el" href="group__ups__database.html#gaf24eda01709197d3eb53a9ec38bdb7f1">UPS_RECORD_NUMBER32</a>  Creates an "auto-increment" Database. Keys in Record Number Databases are automatically assigned an incrementing 32bit value. If key-&gt;data is not NULL (and key-&gt;flags is <a class="el" href="upscaledb_8h.html#a7247baa4c9b9c441c7322a262f49da4e">UPS_KEY_USER_ALLOC</a>), the value of the current key is returned in <em>key</em>. If key-data is NULL and key-&gt;size is 0, key-&gt;data is temporarily allocated by upscaledb. </li>
<li>
<a class="el" href="group__ups__database.html#gaf39747db5d358cd36de46463253a3e0b">UPS_RECORD_NUMBER64</a>  Creates an "auto-increment" Database. Keys in Record Number Databases are automatically assigned an incrementing 64bit value. If key-&gt;data is not NULL (and key-&gt;flags is <a class="el" href="upscaledb_8h.html#a7247baa4c9b9c441c7322a262f49da4e">UPS_KEY_USER_ALLOC</a>), the value of the current key is returned in <em>key</em>. If key-data is NULL and key-&gt;size is 0, key-&gt;data is temporarily allocated by upscaledb. </li>
</ul>
</td></tr>
    <tr><td class="paramname">params</td><td>An array of <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> structures. The following parameters are available: <ul>
<li>
<a class="el" href="group__ups__database.html#gacbb38eebd646f1e0a9b7ce1eb87429ac">UPS_PARAM_KEY_TYPE</a>  The type of the keys in the B+Tree index. The default is <a class="el" href="group__ups__key__types.html#gad2247fb01fd7d74c9f8dcd9bb05116f6">UPS_TYPE_BINARY</a>. See above for more information. </li>
<li>
<a class="el" href="group__ups__database.html#ga79e595da449b6a9a866c0c3e6e13eea0">UPS_PARAM_KEY_SIZE</a>  The (fixed) size of the keys in the B+Tree index; or <a class="el" href="group__ups__database.html#ga06133a942ad3bd6defb7e866b6d336ea">UPS_KEY_SIZE_UNLIMITED</a> for unlimited and variable keys (this is the default). </li>
<li>
<a class="el" href="group__ups__database.html#gae95b1720e2379f6114a64fcb8d75cfc1">UPS_PARAM_RECORD_TYPE</a>  The type of the records in the B+Tree index. The default is <a class="el" href="group__ups__key__types.html#gad2247fb01fd7d74c9f8dcd9bb05116f6">UPS_TYPE_BINARY</a>. See above for more information. </li>
<li>
<a class="el" href="group__ups__database.html#ga921820cdf223a09ae69b6105ed7a32e9">UPS_PARAM_RECORD_SIZE</a>  The (fixed) size of the records; or <a class="el" href="group__ups__database.html#ga33d1f5b3962be88a5273ec46d4ab9709">UPS_RECORD_SIZE_UNLIMITED</a> if there was no fixed record size specified (this is the default). </li>
<li>
<a class="el" href="group__ups__database.html#ga7a424cde2efbbc3094f085805bb86e1a">UPS_PARAM_RECORD_COMPRESSION</a> Compresses the records. </li>
<li>
<a class="el" href="group__ups__database.html#gac80f4bb36d42c6262f2233168d785b65">UPS_PARAM_KEY_COMPRESSION</a> Compresses the keys. </li>
<li>
<a class="el" href="group__ups__database.html#ga1d3dff1669fd7a8209ec15d159d10550">UPS_PARAM_CUSTOM_COMPARE_NAME</a> Specifies the name of the custom compare function (only if <em>UPS_PARAM_KEY_TYPE</em> is <em>UPS_TYPE_CUSTOM</em>). </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga7d5ee8bb961c335c3e0f03964fe9fe22">UPS_DATABASE_ALREADY_EXISTS</a> if a Database with this <em>name</em> already exists in this Environment </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga71bfed5b8a4e2cb148eb3ab5707e55af">UPS_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga7cb64a8b37c601c15fefa243063d39d1">UPS_LIMITS_REACHED</a> if the maximum number of Databases per Environment was already created </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00650">upscaledb::env::create_db()</a>, and <a class="el" href="db1_8c_source.html#l00038">main()</a>.</p>

</div>
</div>
<a class="anchor" id="gae5ddd4e578a39dc1927d8a6465bcac2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_erase_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes a Database from an Environment</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">name</td><td>The name of the Database to delete. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ups__status__codes.html#ga411c1bbcef4782e4f02d9b1807c58c42">UPS_DATABASE_NOT_FOUND</a>. If the Database was already opened, the function will fail with <a class="el" href="group__ups__status__codes.html#ga4d7434f1b34bea87816e4f5d7a582c98">UPS_DATABASE_ALREADY_OPEN</a>. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for deleting the Database; unused, set to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or if the new Database name is reserved </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga411c1bbcef4782e4f02d9b1807c58c42">UPS_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga4d7434f1b34bea87816e4f5d7a582c98">UPS_DATABASE_ALREADY_OPEN</a> if a Database with this name is still open </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00681">upscaledb::env::erase_db()</a>.</p>

</div>
</div>
<a class="anchor" id="ga394c0b85da29e3eaca719b67504f755f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flushes the Environment</p>
<p>This function flushes the Environment caches and writes the whole file to disk. All Databases of this Environment are flushed as well.</p>
<p>Since In-Memory Databases do not have a file on disk, the function will have no effect and will return <a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for flushing; unused, set to 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if <em>db</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00643">upscaledb::env::flush()</a>.</p>

</div>
</div>
<a class="anchor" id="ga70ee2ba96afc341acd72a3e7a11090ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_get_database_names </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *&#160;</td>
          <td class="paramname"><em>names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the names of all Databases in an Environment</p>
<p>This function returns the names of all Databases and the number of Databases in an Environment.</p>
<p>The memory for <em>names</em> must be allocated by the user. <em>count</em> must be the size of <em>names</em> when calling the function, and will be the number of Databases when the function returns. The function returns <a class="el" href="group__ups__status__codes.html#ga7cb64a8b37c601c15fefa243063d39d1">UPS_LIMITS_REACHED</a> if <em>names</em> is not big enough; in this case, the caller should resize the array and call the function again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">names</td><td>Pointer to an array for the Database names </td></tr>
    <tr><td class="paramname">count</td><td>Pointer to the size of the array; will be used to store the number of Databases when the function returns.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if <em>env</em>, <em>names</em> or <em>count</em> is NULL </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga7cb64a8b37c601c15fefa243063d39d1">UPS_LIMITS_REACHED</a> if <em>names</em> is not large enough to hold all Database names </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00718">upscaledb::env::get_database_names()</a>.</p>

</div>
</div>
<a class="anchor" id="ga314c78f6e23b79f23ed7167dd9dc4b7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_get_parameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the current value for a given Environment setting</p>
<p>Only those values requested by the parameter array will be stored.</p>
<p>The following parameters are supported: </p><ul>
<li>
UPS_PARAM_CACHE_SIZE returns the cache size </li>
<li>
UPS_PARAM_PAGE_SIZE returns the page size </li>
<li>
UPS_PARAM_MAX_DATABASES returns the max. number of Databases of this Database's Environment </li>
<li>
UPS_PARAM_FLAGS returns the flags which were used to open or create this Database </li>
<li>
UPS_PARAM_FILEMODE returns the <em>mode</em> parameter which was specified when creating this Database </li>
<li>
UPS_PARAM_FILENAME returns the filename (the <em>value</em> of this parameter is a const char * pointer casted to a uint64_t variable) </li>
<li>
<a class="el" href="group__ups__database.html#gacd60cf3d471666d07f709a20998ae2b7">UPS_PARAM_LOG_DIRECTORY</a> The path of the log file and the journal files. Ignored for remote Environments. </li>
<li>
<a class="el" href="group__ups__database.html#gaa500ccd15fe670731d50a5af9db5f99b">UPS_PARAM_JOURNAL_COMPRESSION</a> Returns the selected algorithm for journal compression, or 0 if compression is disabled </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">param</td><td>An array of <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> structures</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or <em>param</em> is NULL </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00711">upscaledb::env::get_parameters()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3f347d5c9b11301c45c3f27624b5f55a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> **&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens an existing Database Environment</p>
<p>This function opens an existing Database Environment.</p>
<p>A Database Environment is a collection of Databases, which are all stored in one physical file (or in-memory).</p>
<p>Each Database in an Environment is identified by a positive 16bit value (except 0 and values at or above 0xf000). Databases in an Environment can be created with <a class="el" href="group__ups__env.html#ga38fcbdfa52fe22afe2aa3b3cc7395ea5">ups_env_create_db</a> or opened with <a class="el" href="group__ups__env.html#ga2fc332c2e0b4feba84c2e9761c6443a5">ups_env_open_db</a>.</p>
<p>Specify a URL instead of a filename (i.e. "ups://localhost:8080/customers.db") to access a remote upscaledb Server.</p>
<p>Also see the documentation <a class="el" href="group__ups__env.html#ga30705470fbae862c47512a33564d72a8">ups_env_create</a> about Transactions, Recovery, AES encryption and the use of fsync.</p>
<p>If Transactions are enabled, a journal file is written in order to provide recovery if the system crashes. These journal files can be compressed by supplying the parameter <a class="el" href="group__ups__database.html#gaa500ccd15fe670731d50a5af9db5f99b">UPS_PARAM_JOURNAL_COMPRESSION</a>. Values are one of <a class="el" href="group__ups__database.html#gaf972472b1d2ed3b624fdaef4214e5816">UPS_COMPRESSOR_ZLIB</a>, <a class="el" href="group__ups__database.html#ga4a7a3708ebd835c4b6fa80687f75f874">UPS_COMPRESSOR_SNAPPY</a> etc. See the upscaledb documentation for more details. This parameter is not persisted.</p>
<p>CRC32 checksums are stored when a page is flushed, and verified when it is fetched from disk if the flag <a class="el" href="group__ups__database.html#ga80fa8f7d0c0d67a21d7e19d13f438557">UPS_ENABLE_CRC32</a> is set. API functions will return <a class="el" href="group__ups__status__codes.html#ga73b2b6b1fc45e5c5326a616c0eb79011">UPS_INTEGRITY_VIOLATED</a> in case of failed verifications. This flag is not persisted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the Environment file, or URL of a upscaledb Server </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for opening the Environment, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ups__database.html#gaf564777b6cd6db2d649e4512f8cdade6">UPS_READ_ONLY</a>  Opens the file for reading only. Operations that need write access (i.e. <a class="el" href="group__ups__database.html#ga6d2f0a2dd9db6d80d215a2dc8b6b2240">ups_db_insert</a>) will return <a class="el" href="group__ups__status__codes.html#ga20e86147742005e083a8ed80da183f4e">UPS_WRITE_PROTECTED</a>. </li>
<li>
<a class="el" href="group__ups__database.html#gae59ee70fdea8d8548d10c8c1caa3edb6">UPS_ENABLE_FSYNC</a> Flushes all file handles after committing or aborting a Transaction using fsync(), fdatasync() or FlushFileBuffers(). This file has no effect if Transactions are disabled. Slows down performance but makes sure that all file handles and operating system caches are transferred to disk, thus providing a stronger durability. </li>
<li>
<a class="el" href="group__ups__database.html#gad6c99635435450b43aa1010f70b2f44f">UPS_DISABLE_MMAP</a>  Do not use memory mapped files for I/O. By default, upscaledb checks if it can use mmap, since mmap is faster than read/write. For performance reasons, this flag should not be used. </li>
<li>
<a class="el" href="group__ups__database.html#ga298e4f933ee638f7212c51aa170808bc">UPS_CACHE_UNLIMITED</a>  Do not limit the cache. Nearly as fast as an In-Memory Database. Not allowed in combination with a limited cache size. </li>
<li>
<a class="el" href="group__ups__database.html#gab6ff32906c46051a58012f24d79a7c24">UPS_ENABLE_TRANSACTIONS</a>  Enables Transactions for this Environment. </li>
<li>
<a class="el" href="group__ups__database.html#ga801b9a235de797946fe46fcd6ec8a2f1">UPS_DISABLE_RECOVERY</a> Disables logging/recovery for this Environment. </li>
<li>
<a class="el" href="group__ups__database.html#ga8376d8cbc757525c79d311554d285f80">UPS_AUTO_RECOVERY</a>  Automatically recover the Environment, if necessary. </li>
<li>
<a class="el" href="group__ups__database.html#ga80fa8f7d0c0d67a21d7e19d13f438557">UPS_ENABLE_CRC32</a> Stores (and verifies) CRC32 checksums. </li>
</ul>
</td></tr>
    <tr><td class="paramname">param</td><td>An array of <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> structures. The following parameters are available: <ul>
<li>
<a class="el" href="group__ups__database.html#ga693990741aa7890778b976dcf886405d">UPS_PARAM_CACHE_SIZE</a>  The size of the Database cache, in bytes. The default size is defined in src/config.h as <em>UPS_DEFAULT_CACHE_SIZE</em> - usually 2MB </li>
<li>
<a class="el" href="group__ups__database.html#ga496a10dda6ca80fe7172a0194eb325c1">UPS_PARAM_POSIX_FADVISE</a> Sets the "advice" for posix_fadvise(). Only on supported platforms. Allowed values are <a class="el" href="group__ups__database.html#ga5512f2066c4698f852a045c2d1656578">UPS_POSIX_FADVICE_NORMAL</a> (which is the default) or <a class="el" href="group__ups__database.html#gaff6340291eebb414abde724aedd8587e">UPS_POSIX_FADVICE_RANDOM</a>. </li>
<li>
<a class="el" href="group__ups__database.html#gac3b74e1628fac580709377b918cd3a85">UPS_PARAM_FILE_SIZE_LIMIT</a> Sets a file size limit (in bytes). Disabled by default. If the limit is exceeded, API functions return <a class="el" href="group__ups__status__codes.html#ga7cb64a8b37c601c15fefa243063d39d1">UPS_LIMITS_REACHED</a>. </li>
<li>
<a class="el" href="group__ups__database.html#gacd60cf3d471666d07f709a20998ae2b7">UPS_PARAM_LOG_DIRECTORY</a> The path of the log file and the journal files; default is the same path as the database file. Ignored for remote Environments. </li>
<li>
<a class="el" href="group__ups__database.html#ga59b311a7be6aaa4cc9614b6bed8d29bf">UPS_PARAM_NETWORK_TIMEOUT_SEC</a> Timeout (in seconds) when waiting for data from a remote server. By default, no timeout is set. </li>
<li>
<a class="el" href="group__ups__database.html#gaa500ccd15fe670731d50a5af9db5f99b">UPS_PARAM_JOURNAL_COMPRESSION</a> Compresses the journal files to reduce I/O. See notes above. </li>
<li>
<a class="el" href="group__ups__database.html#ga3c29e7f5342bac39bbceedb43aa5f742">UPS_PARAM_ENCRYPTION_KEY</a> The 16 byte long AES encryption key; enables AES encryption for the Environment file. Not allowed for In-Memory Environments. Ignored for remote Environments. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success. </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if the <em>env</em> pointer is NULL, an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga3ed317453d885db673c4dcf2e2c206fd">UPS_FILE_NOT_FOUND</a> if the file does not exist </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga3c6a08be0a0403a8e20f359e4c58842c">UPS_IO_ERROR</a> if the file could not be opened or reading failed </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#gabe38ecb2c72a8c8c93cfa8f1dfb360fe">UPS_INV_FILE_VERSION</a> if the Environment version is not compatible with the library version. </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga71bfed5b8a4e2cb148eb3ab5707e55af">UPS_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga8c5c49f50b2e503602f4fc36b16cb35c">UPS_WOULD_BLOCK</a> if another process has locked the file </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#gaa8777cb90d8701450382ff8f8d4ba678">UPS_NEED_RECOVERY</a> if the Database is in an inconsistent state </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#gaa3fc977d519e3b88eb44b010cd5da454">UPS_LOG_INV_FILE_HEADER</a> if the logfile is corrupt </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#gaf03b330db379f1c8f6a6fae72e981a38">UPS_ENVIRONMENT_ALREADY_OPEN</a> if <em>env</em> is already in use </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga501534656238d378ca89f9e889a12b79">UPS_NETWORK_ERROR</a> if a remote server is not reachable </dd></dl>

<p>Referenced by <a class="el" href="db1_8c_source.html#l00038">main()</a>, and <a class="el" href="upscaledb_8hpp_source.html#l00635">upscaledb::env::open()</a>.</p>

</div>
</div>
<a class="anchor" id="ga2fc332c2e0b4feba84c2e9761c6443a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_open_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a714e13216711b8969c2315563ed2ae78">ups_db_t</a> **&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structups__parameter__t.html">ups_parameter_t</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Opens a Database in a Database Environment</p>
<p>Each Database in an Environment is identified by a positive 16bit value (except 0 and values at or above 0xf000).</p>
<p>This function initializes the ups_db_t handle (the second parameter). When the handle is no longer in use, it should be closed with <a class="el" href="group__ups__database.html#ga411dcddac34ea2dc3770e9fcce93cec3">ups_db_close</a>. Alternatively, the Database handle is closed automatically if <a class="el" href="group__ups__env.html#gae50d3ad9ebd3f098bdf755b300fa3496">ups_env_close</a> is called with the flag <a class="el" href="group__ups__database.html#ga9c7eadb6077237a0cb6d2f65396452e0">UPS_AUTO_CLEANUP</a>.</p>
<p>If this database stores keys with a custom compare function then you have to install the compare function (<a class="el" href="group__ups__database.html#ga21c4b93c276662dac47a2d38b51e10ba">ups_register_compare</a>) prior to opening the database.</p>
<p>Records can be compressed transparently in order to reduce I/O and disk space. Compression is enabled with UPS_PARAM_ENABLE_RECORD_COMPRESSION. Values are one of <a class="el" href="group__ups__database.html#gaf972472b1d2ed3b624fdaef4214e5816">UPS_COMPRESSOR_ZLIB</a>, <a class="el" href="group__ups__database.html#ga4a7a3708ebd835c4b6fa80687f75f874">UPS_COMPRESSOR_SNAPPY</a> etc. See the upscaledb documentation for more details. This parameter is not persisted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle </td></tr>
    <tr><td class="paramname">db</td><td>A valid Database handle, which will point to the opened Database. To close the handle, use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ups__database.html#ga411dcddac34ea2dc3770e9fcce93cec3">ups_db_close</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the Database. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ups__status__codes.html#ga411c1bbcef4782e4f02d9b1807c58c42">UPS_DATABASE_NOT_FOUND</a>. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for opening the Database, combined with bitwise OR. Possible flags are: <ul>
<li>
<a class="el" href="group__ups__database.html#gaf564777b6cd6db2d649e4512f8cdade6">UPS_READ_ONLY</a>  Opens the Database for reading only. Operations that need write access (i.e. <a class="el" href="group__ups__database.html#ga6d2f0a2dd9db6d80d215a2dc8b6b2240">ups_db_insert</a>) will return <a class="el" href="group__ups__status__codes.html#ga20e86147742005e083a8ed80da183f4e">UPS_WRITE_PROTECTED</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramname">params</td><td>Reserved; set to NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or an invalid combination of flags was specified </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga411c1bbcef4782e4f02d9b1807c58c42">UPS_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist in this Environment. </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga4d7434f1b34bea87816e4f5d7a582c98">UPS_DATABASE_ALREADY_OPEN</a> if this Database was already opened </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga71bfed5b8a4e2cb148eb3ab5707e55af">UPS_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga4248b6884c5445a3bcf7f75a7db3ca69">UPS_NOT_READY</a> if the database requires a custom callback function, but this function was not yet registered </dd></dl>

<p>Referenced by <a class="el" href="client1_8c_source.html#l00037">main()</a>, and <a class="el" href="upscaledb_8hpp_source.html#l00662">upscaledb::env::open_db()</a>.</p>

</div>
</div>
<a class="anchor" id="gaeff4a7a4c1363bef3c7f0a178ad8fd5b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a5238f90b5e8005a0315aebd0cc85249d">UPS_EXPORT</a> <a class="el" href="types_8h.html#a0337683652d1c4bad5d97c412ba668ff">ups_status_t</a> <a class="el" href="types_8h.html#a6f7cfa7f36c259b085df774fb5dc169a">UPS_CALLCONV</a> ups_env_rename_db </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="upscaledb_8h.html#a0d87de33008cdf9d39f476c53f424039">ups_env_t</a> *&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>&#160;</td>
          <td class="paramname"><em>newname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Renames a Database in an Environment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">env</td><td>A valid Environment handle. </td></tr>
    <tr><td class="paramname">oldname</td><td>The old name of the existing Database. If a Database with this name does not exist, the function will fail with <a class="el" href="group__ups__status__codes.html#ga411c1bbcef4782e4f02d9b1807c58c42">UPS_DATABASE_NOT_FOUND</a>. </td></tr>
    <tr><td class="paramname">newname</td><td>The new name of this Database. If a Database with this name already exists, the function will fail with <a class="el" href="group__ups__status__codes.html#ga7d5ee8bb961c335c3e0f03964fe9fe22">UPS_DATABASE_ALREADY_EXISTS</a>. </td></tr>
    <tr><td class="paramname">flags</td><td>Optional flags for renaming the Database, combined with bitwise OR; unused, set to 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ups__status__codes.html#gaa7f7ba5d60102ddc7373f227a4e693a0">UPS_SUCCESS</a> upon success </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga05db5e32c706e8ecc3f1bc444caf8c41">UPS_INV_PARAMETER</a> if the <em>env</em> pointer is NULL or if the new Database name is reserved </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga411c1bbcef4782e4f02d9b1807c58c42">UPS_DATABASE_NOT_FOUND</a> if a Database with this <em>name</em> does not exist in this Environment </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga7d5ee8bb961c335c3e0f03964fe9fe22">UPS_DATABASE_ALREADY_EXISTS</a> if a Database with the new name already exists </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga71bfed5b8a4e2cb148eb3ab5707e55af">UPS_OUT_OF_MEMORY</a> if memory could not be allocated </dd>
<dd>
<a class="el" href="group__ups__status__codes.html#ga4248b6884c5445a3bcf7f75a7db3ca69">UPS_NOT_READY</a> if the Environment <em>env</em> was not initialized correctly (i.e. not yet opened or created) </dd></dl>

<p>Referenced by <a class="el" href="upscaledb_8hpp_source.html#l00674">upscaledb::env::rename_db()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
